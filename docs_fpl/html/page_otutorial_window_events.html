<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Final Platform Layer: Window events</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Final Platform Layer
   &#160;<span id="projectnumber">0.6.0.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">index</a></li><li class="navelem"><a class="el" href="page_introduction.html">Introduction</a></li><li class="navelem"><a class="el" href="page_tutorials.html">Tutorials</a></li><li class="navelem"><a class="el" href="page_otutorial_input_events.html">Input events</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Window events </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#section_otutorial_window_events_polling">Polling the events</a></li>
<li class="level1"><a href="#section_otutorial_window_events_handling">Handling the Events</a></li>
<li class="level1"><a href="#section_otutorial_window_events_handle_event_type">Handle the event data</a><ul><li class="level2"><a href="#subsection_otutorial_window_events_handle_event_type_mouse">Mouse events</a></li>
<li class="level2"><a href="#subsection_otutorial_window_events_handle_event_type_keyboard">Keyboard events</a></li>
<li class="level2"><a href="#subsection_otutorial_window_events_handle_event_type_gamepad">Gamepad events</a></li>
<li class="level2"><a href="#subsection_otutorial_window_events_handle_event_type_window">Window events</a></li>
</ul>
</li>
<li class="level1"><a href="#section_otutorial_window_events_inotes">Important Notes</a></li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="section_otutorial_window_events_polling"></a>
Polling the events</h1>
<p>To poll the events from the internal queue you simply call the correspondending function <a class="el" href="group___window_events.html#gae0649e31be36f8b53d2f779ac91567fc">fpl::window::PollWindowEvent()</a> in a while-loop inside your actual main-loop.<br />
 Each event is copied into the <a class="el" href="structfpl_1_1window_1_1_event.html">fpl::window::Event</a> reference parameter which you can handle or not.<br />
 If there are no events left, the function returns false and you are done.</p>
<div class="fragment"><div class="line"><a class="code" href="structfpl_1_1window_1_1_event.html">fpl::window::Event</a> currentEvent;</div><div class="line"><span class="keywordflow">while</span> (<a class="code" href="group___window_events.html#gae0649e31be36f8b53d2f779ac91567fc">fpl::window::PollWindowEvent</a>(currentEvent)) {</div><div class="line">    <span class="comment">// ... Handling the event</span></div><div class="line">}</div></div><!-- fragment --><h1><a class="anchor" id="section_otutorial_window_events_handling"></a>
Handling the Events</h1>
<p>Each event has a <a class="el" href="structfpl_1_1window_1_1_event.html#ae69cd7351a23ee07a9c6c663d5c5aea7">fpl::window::Event::type</a> field which you can check on to read the actual data (Keyboard, Mouse, Window, etc.).</p>
<div class="fragment"><div class="line"><a class="code" href="structfpl_1_1window_1_1_event.html">fpl::window::Event</a> currentEvent;</div><div class="line"><span class="keywordflow">while</span> (<a class="code" href="group___window_events.html#gae0649e31be36f8b53d2f779ac91567fc">fpl::window::PollWindowEvent</a>(currentEvent)) {</div><div class="line">    <span class="keywordflow">switch</span> (currentEvent.<a class="code" href="structfpl_1_1window_1_1_event.html#ae69cd7351a23ee07a9c6c663d5c5aea7">type</a>) {</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___window_events.html#gga5bca567a4ac5c4145c9a492b0558ee4aac89686a387d2b12b3c729ce35a0bcb5b">fpl::window::EventType::Window</a>:</div><div class="line">        {</div><div class="line">            <span class="comment">// A window event, like resize, lost/got focus, etc.</span></div><div class="line">        } <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___window_events.html#gga5bca567a4ac5c4145c9a492b0558ee4aa6ce4d85a628a88bbdb3ac24a8e5a9c2e">fpl::window::EventType::Keyboard</a>:</div><div class="line">        {</div><div class="line">            <span class="comment">// A keyboard event, like key down/up, pressed, etc.</span></div><div class="line">        } <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___window_events.html#gga5bca567a4ac5c4145c9a492b0558ee4aaf2a47c6809d88e175dade0ef7b16aa13">fpl::window::EventType::Mouse</a>:</div><div class="line">        {</div><div class="line">            <span class="comment">// A mouse event, like mouse button down/up, mouse move, etc.</span></div><div class="line">        } <span class="keywordflow">break</span>;</div><div class="line">        <span class="keywordflow">case</span> <a class="code" href="group___window_events.html#gga5bca567a4ac5c4145c9a492b0558ee4aa221f6781b4faa2d321ca0d928f518d6e">fpl::window::EventType::Gamepad</a>:</div><div class="line">        {</div><div class="line">            <span class="comment">// A gamepad event, like connected/disconnected, state-updated etc.</span></div><div class="line">        } <span class="keywordflow">break</span>;</div><div class="line">    }</div><div class="line">}</div></div><!-- fragment --><p>All available event types are stored in the <a class="el" href="group___window_events.html#ga5bca567a4ac5c4145c9a492b0558ee4a">fpl::window::EventType</a> enumeration.</p>
<h1><a class="anchor" id="section_otutorial_window_events_handle_event_type"></a>
Handle the event data</h1>
<p>All relevant event data are stored in fields which matches the lowercase <a class="el" href="group___window_events.html#ga5bca567a4ac5c4145c9a492b0558ee4a">fpl::window::EventType</a> name.<br />
 Each event structure has another type field to check for the actual type (Key-Down, Mouse-Move, Window-Resize etc.).<br />
</p>
<h2><a class="anchor" id="subsection_otutorial_window_events_handle_event_type_mouse"></a>
Mouse events</h2>
<p>Mouse event data are stored in the <a class="el" href="structfpl_1_1window_1_1_mouse_event.html">fpl::window::MouseEvent</a> structure.</p>
<div class="fragment"><div class="line"><span class="keywordflow">switch</span> (currentEvent.<a class="code" href="structfpl_1_1window_1_1_event.html#a64673c8ea91ac21ce618ed73fe413ba8">mouse</a>.<a class="code" href="structfpl_1_1window_1_1_mouse_event.html#a02fd8b5e3c93af2f4ee09413f3c572e8">type</a>) {</div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___window_events.html#ggafb71b85fe6f916d575cab2076f7c1635adbe47f32761ac5389cee901a663e7bc0">fpl::window::MouseEventType::ButtonDown</a>:</div><div class="line">    {</div><div class="line">        <a class="code" href="group___window_events.html#gaa59b9dadfe29d58132ad77164994bdc5">fpl::window::MouseButtonType</a> button = currentEvent.<a class="code" href="structfpl_1_1window_1_1_event.html#a64673c8ea91ac21ce618ed73fe413ba8">mouse</a>.button;</div><div class="line">        <span class="comment">// ... do something with the mouse button</span></div><div class="line">    } <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___window_events.html#ggafb71b85fe6f916d575cab2076f7c1635a6bc362dbf494c61ea117fe3c71ca48a5">fpl::window::MouseEventType::Move</a>:</div><div class="line">    {</div><div class="line">        <span class="keywordtype">int</span> mouseX = currentEvent.<a class="code" href="structfpl_1_1window_1_1_event.html#a64673c8ea91ac21ce618ed73fe413ba8">mouse</a>.<a class="code" href="structfpl_1_1window_1_1_mouse_event.html#a136ee8b168ff61ddb332ad1120712871">mouseX</a>;</div><div class="line">        <span class="keywordtype">int</span> mouseY = currentEvent.<a class="code" href="structfpl_1_1window_1_1_event.html#a64673c8ea91ac21ce618ed73fe413ba8">mouse</a>.<a class="code" href="structfpl_1_1window_1_1_mouse_event.html#a5d5ee5899dda9956c45362ec2cf7e0da">mouseY</a>;</div><div class="line">        <span class="comment">// ... do something with the mouse position</span></div><div class="line">    } <span class="keywordflow">break</span>;</div><div class="line">}</div></div><!-- fragment --><h2><a class="anchor" id="subsection_otutorial_window_events_handle_event_type_keyboard"></a>
Keyboard events</h2>
<p>Keyboard event data are stored in the <a class="el" href="structfpl_1_1window_1_1_keyboard_event.html">fpl::window::KeyboardEvent</a> structure.<br />
 <br />
 You can either check for the original <a class="el" href="structfpl_1_1window_1_1_keyboard_event.html#a814da8ae88851382d5bdcf27f96d2cc9">fpl::window::KeyboardEvent::keyCode</a> or use the <a class="el" href="structfpl_1_1window_1_1_keyboard_event.html#ac2d511ffa600d151cf5c7f9a1882a51a" title="Mapped key. ">fpl::window::KeyboardEvent.mappedKey</a> field - which is much easier and less error prone.<br />
</p>
<div class="fragment"><div class="line"><span class="keywordflow">switch</span> (currentEvent.<a class="code" href="structfpl_1_1window_1_1_event.html#af9170219764a7483a8efee8902da44e6">keyboard</a>.<a class="code" href="structfpl_1_1window_1_1_keyboard_event.html#affe49621057130737467d58fa1b20584">type</a>) {</div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___window_events.html#ggacc336636e2219913ba436b1900358e24acfd07bf1effd88bca04a12a087777354">fpl::window::KeyboardEventType::KeyDown</a>:</div><div class="line">    {</div><div class="line">        <span class="comment">// ... Handle the key code</span></div><div class="line">        uint64_t keyCode = currentEvent.<a class="code" href="structfpl_1_1window_1_1_event.html#af9170219764a7483a8efee8902da44e6">keyboard</a>.<a class="code" href="structfpl_1_1window_1_1_keyboard_event.html#a814da8ae88851382d5bdcf27f96d2cc9">keyCode</a>;</div><div class="line">        <span class="keywordflow">if</span> (keyCode == 65 || keyCode == 97) {</div><div class="line">            <span class="comment">// Letter A is held down</span></div><div class="line">        }</div><div class="line"></div><div class="line">        <span class="comment">// or</span></div><div class="line"></div><div class="line">        <span class="comment">// ... handle the mapped key</span></div><div class="line">        <a class="code" href="group___window_events.html#gab45601d8968b4696e5d6dc3d79d4a3be">fpl::window::Key</a> mappedKey = currentEvent.<a class="code" href="structfpl_1_1window_1_1_event.html#af9170219764a7483a8efee8902da44e6">keyboard</a>.<a class="code" href="structfpl_1_1window_1_1_keyboard_event.html#ac2d511ffa600d151cf5c7f9a1882a51a">mappedKey</a>;</div><div class="line">        <span class="keywordflow">if</span> (mappedKey == fpl::window::Key::Key_F1) {</div><div class="line">            <span class="comment">// F1 key held down</span></div><div class="line">        }</div><div class="line">    } <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___window_events.html#ggacc336636e2219913ba436b1900358e24a699a1a8e07421c3903046eace15b9ce1">fpl::window::KeyboardEventType::CharInput</a>:</div><div class="line">    {</div><div class="line">        <span class="comment">// Handle character input</span></div><div class="line">    } <span class="keywordflow">break</span>;</div><div class="line">}</div></div><!-- fragment --><h2><a class="anchor" id="subsection_otutorial_window_events_handle_event_type_gamepad"></a>
Gamepad events</h2>
<p>Gamepad event data are stored in the <a class="el" href="structfpl_1_1window_1_1_gamepad_event.html">fpl::window::GamepadEvent</a> structure.<br />
</p>
<div class="fragment"><div class="line"><span class="keywordflow">switch</span> (currentEvent.<a class="code" href="structfpl_1_1window_1_1_event.html#acd55903a68020728b161f3db3b8bff49">gamepad</a>.<a class="code" href="structfpl_1_1window_1_1_gamepad_event.html#ad3453bd5181634ae53ce34e005a427dd">type</a>) {</div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___window_events.html#gga85374967f1703b14d476872c6df8d4c7a2ec0d16e4ca169baedb9b2d50ec5c6d7">fpl::window::GamepadEventType::Connected</a>:</div><div class="line">    {</div><div class="line">        <span class="comment">// New gamepad device connected</span></div><div class="line">    } <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___window_events.html#gga85374967f1703b14d476872c6df8d4c7aef70e46fd3bbc21e3e1f0b6815e750c0">fpl::window::GamepadEventType::Disconnected</a>:</div><div class="line">    {</div><div class="line">        <span class="comment">// Lost connection to a gamepad device</span></div><div class="line">    } <span class="keywordflow">break</span>;</div><div class="line"></div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___window_events.html#gga85374967f1703b14d476872c6df8d4c7a8499576aa97bf34e41c9ffec52b20151">fpl::window::GamepadEventType::StateChanged</a>:</div><div class="line">    {</div><div class="line">        <span class="comment">// State of one controller updated (Buttons, Movement, etc.)</span></div><div class="line">        <span class="keywordflow">if</span> (absf(currentEvent.<a class="code" href="structfpl_1_1window_1_1_event.html#acd55903a68020728b161f3db3b8bff49">gamepad</a>.leftStickX) &gt; 0) {</div><div class="line">            <span class="comment">// ... Handle horizontal movement on left stick</span></div><div class="line">        }</div><div class="line">        <span class="keywordflow">if</span> (currentEvent.<a class="code" href="structfpl_1_1window_1_1_event.html#acd55903a68020728b161f3db3b8bff49">gamepad</a>.actionX.isDown) {</div><div class="line">            <span class="comment">// ... X-Button is held down</span></div><div class="line">        }</div><div class="line">    } <span class="keywordflow">break</span>;</div><div class="line">}</div></div><!-- fragment --><h2><a class="anchor" id="subsection_otutorial_window_events_handle_event_type_window"></a>
Window events</h2>
<p>Window event data are stored in the <a class="el" href="structfpl_1_1window_1_1_window_event.html">fpl::window::WindowEvent</a> structure.<br />
</p>
<div class="fragment"><div class="line"><span class="keywordflow">switch</span> (currentEvent.<a class="code" href="structfpl_1_1window_1_1_event.html#a43d5437c746ee44af2904cff2304bdae">window</a>.<a class="code" href="structfpl_1_1window_1_1_window_event.html#abb7deca08eaa49b67630ec0c949d1b98">type</a>) {</div><div class="line">    <span class="keywordflow">case</span> <a class="code" href="group___window_events.html#ggad06ffcf43b2eabc01cb12a8cf9f55e35a22995988de764d7a8cb4165fbff371cb">fpl::window::WindowEventType::Resized</a>:</div><div class="line">    {</div><div class="line">        uint32_t newWidth = currentEvent.<a class="code" href="structfpl_1_1window_1_1_event.html#a43d5437c746ee44af2904cff2304bdae">window</a>.<a class="code" href="structfpl_1_1window_1_1_window_event.html#afc9891648a45cc2c5a9a0eeb00d3921b">width</a>;</div><div class="line">        uint32_t newHeight = currentEvent.<a class="code" href="structfpl_1_1window_1_1_event.html#a43d5437c746ee44af2904cff2304bdae">window</a>.<a class="code" href="structfpl_1_1window_1_1_window_event.html#ab5dfad611a3b242d0b144388f5c0d082">height</a>;</div><div class="line">        <span class="comment">// ... Window was resized, handle it properly</span></div><div class="line">    } <span class="keywordflow">break</span>;</div><div class="line">}</div></div><!-- fragment --><h1><a class="anchor" id="section_otutorial_window_events_inotes"></a>
Important Notes</h1>
<p>FPL does not cache the events from the previous update. If you dont handle the event - the data is lost!<br />
 You are responsible for caching the data if needed.<br />
 Also you must always poll each event to ensure that the internal queue will not get full! </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
